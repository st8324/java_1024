<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>회원가입</title>
	<script src="../js/jquery.min.js"></script>
	<style>
		form{
			width: 500px; margin: 0 auto;
		}
		[name=id]{
			display: block; width: 100%;
			height: 30px; box-sizing: border-box;
		}
		.btn-dup, .btn-submit{
			margin-top: 10px; display: block; width: 100%;
			box-sizing: border-box;
		}
	</style>
</head>
<body>
	<form action="">
		<h1>회원가입</h1>
		<input type="text" name="id">
		<button type="button" class="btn-dup">중복확인</button>
		<button type="submit" class="btn-submit">회원가입</button>
	</form>
	<script>
		$(function(){
			$('.btn-dup').click(function(){
				let regex = /^[a-zA-Z0-9]{5,8}$/;
				let val = $('[name=id]').val();
				if(regex.test(val)){
					alert('사용 가능한 아이디입니다.');
					isPossible = true;
				}else{
					alert('이미 사용중인 아이디입니다.');
				}
			});
			$('form').submit(function(){
				if(!isPossible){
					alert('중복확인을 하세요.');
					return false;
				}
			});
			$('[name=id]').change(function(){
				isPossible = false;
			});
		});
		let isPossible = false;
	</script>
</body>
</html>